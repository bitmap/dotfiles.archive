#!/usr/bin/env bash

cd "$(dirname "${BASH_SOURCE}")";

function link_dotfiles() {
	dir=~/.dotfiles
	files=".bash_profile .vimrc .vim .gitconfig .gitignore"

	for file in $files; do
		rm -r ~/$file
    echo "Creating symlink to $file..."
    ln -s $dir/$file ~/$file
	done

	echo "Creating symlink to VS Code Settings..."
	rm ~/Library/Application\ Support/Code/User/settings.json
	ln -s $dir/.vscode/settings.json ~/Library/Application\ Support/Code/User/settings.json

	echo "Creating symlink to NVM default packages..."
	rm ~/.nvm/default-packages
	ln -s $dir/.nvm/default-packages ~/.nvm/default-packages

	touch ~/.hushlogin
	source ~/.bash_profile;

	echo "Done. Bye."
}

if [ "$1" == "--force" -o "$1" == "-f" ]; then
	link_dotfiles;
else
	read -p "This will overwrite existing files. Are you sure? (y/n) " -n 1;
	echo "";
	if [[ $REPLY =~ ^[Yy]$ ]]; then
		link_dotfiles;
	fi;
fi;
unset link_dotfiles;
